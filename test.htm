<!DOCTYPE html>
<html>
  <head>
   <script type="text/javascript" src="https://apis.google.com/js/api.js"></script>
	</head>
<script>
   	
   	LoadGoogleDrive();
   	
function LoadGoogleDrive()
{
  	var pickerApiLoaded=false;
	var oauthToken;
	gapi.load('auth', { 'callback': function() {
			window.gapi.auth.authorize( {
              	'client_id': "81792849751-1c76v0vunqu0ev9fgqsfgg9t2sehcvn2.apps.googleusercontent.com",
             	'scope': ['https://www.googleapis.com/auth/drive.readonly'],
              	'immediate': false }, function(authResult) {
						if (authResult && !authResult.error) {
          					oauthToken=authResult.access_token;
          					createPicker();
          					}
          				});
			}
		});
	
	gapi.load('picker', {'callback': function() {
			pickerApiLoaded=true;
	        createPicker();
    	   	}
		});

     
      function handleAuthResult(authResult) {
        if (authResult && !authResult.error) {
          oauthToken = authResult.access_token;
          createPicker();
        }
      }

       function createPicker() {
        if (pickerApiLoaded && oauthToken) {
          var picker = new google.picker.PickerBuilder().
              addView(google.picker.ViewId.DOCS).
              setOAuthToken(oauthToken).
              setDeveloperKey("AIzaSyAVjuoRt0060MnK_5_C-xenBkgUaxVBEug").
              setCallback(pickerCallback).
              build();
          picker.setVisible(true);
 //         picker.setIncludeFolders(true);
        }
      }


      function pickerCallback(data) {
        var url = 'nothing';
        if (data[google.picker.Response.ACTION] == google.picker.Action.PICKED) {
          var doc = data[google.picker.Response.DOCUMENTS][0];
          url = doc[google.picker.Document.URL];
        }
        var message = 'You picked: ' + url;
        document.getElementById('result').innerHTML = message;
      }
      
     }
    </script>
  </head>
  <body>
    <div id="result"></div>
   </body>
</html>